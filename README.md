
PVGRAPH
-------

Simple utility to plot power generated by PV array.

![sample graph](https://github.com/downloads/smartavionics/PV-Graph/20110208.png)

Assumes data is stored in MySQL database by [sma-bluetooth](http://code.google.com/p/sma-bluetooth/) program.

Uses the [JFreeChart library](http://www.jfree.org/jfreechart/) to do the actual plotting. You need to obtain
the latest release of that library and unpack the archive in the PV-Graph source directory.

A Makefile is provided to build the program. It expects the JFreeChart library to be in ./jfreechart-1.0.13 so
you will need to adjust the Makefile if your setup is different. This will produce a pvgraph.jar.
  
A simple shell script, **pvgraph.sh**, is provided to run the program - you may need to modify this to suit your setup as it
needs to know where the JFreeChart jars are and also the location of mysql-connector-java.jar.

When PVGraph runs it needs a username, password and url for the MySQL connection. The easiest way to specify these
is to create a **pvgraph.properties** file in the current directory which contains these properties:

    user = USERNAME
    password = PASSWORD
    url = URL                       # e.g. jdbc:mysql://localhost/smatool
    
A basic cron-like capability to run smatool every now and then is configured with these properties:
    
    smatool.cmd = CMDLINE           # command to execute smatool (default smatool)
    smatool.period = NUM            # execute smatool every NUM minutes (default 0, disables autorun)
    smatool.starthour = NUM         # don't run smatool before this hour (default 0)
    smatool.endhour = NUM           # don't run smatool after this hour (default 24)
    smatool.havebutton = 0|1        # display "Run smatool" button for manual updates (default 1)

Other (optional) properties are:

    maxpower.day = NUM              # sets upper limit on power axis (KW) - by default, graphs auto-scale
    maxpower.month = NUM
    maxpower.year = NUM
    plotcolour = 0x00RRGGBB         # colour of plots for all inverters
    plotcolour.SERIAL = 0x00RRGGBB  # colour of plot for a single inverter (specified by SERIAL)
    
Right hand mouse button above a graph pops up a context menu, mouse scroll wheel zooms and ctrl-mousebutton pans.

